export type Locale = "zh" | "en";

export const messages: Record<Locale, Record<string, string>> = {
  zh: {
    "nav.download": "下载",
    "nav.manage": "管理",
    "nav.settings": "设置",
    "nav.about": "关于",
    "nav.share": "分享链接",
    "manage.devices": "设备列表",
    "manage.scan": "扫描",
    "manage.noDevices": "暂无设备",
    "manage.files": "选择文件",
    "manage.filesSelected": "个文件已选",
    "manage.send": "发送",
    "manage.selectDeviceAndFiles": "请先选择设备和文件",
    "settings.saved": "已保存",
    "settings.alias": "设备别名",
    "settings.downloadFolder": "下载目录",
    "settings.pin": "PIN",
    "settings.autoSave": "自动保存（接收时不需确认）",
    "settings.useHttps": "使用 HTTPS",
    "share.createSessionDesc": "创建分享会话后，将链接发给对方即可在下载页接收文件。",
    "share.createSession": "创建会话",
    "share.downloadLink": "下载链接",
    "share.copy": "复制",
    "confirmReceive.title": "确认接收",
    "confirmReceive.from": "来自",
    "confirmReceive.files": "个文件",
    "confirmReceive.accept": "接受",
    "confirmReceive.reject": "拒绝",
    "confirmDownload.title": "确认下载",
    "textReceived.copy": "复制",
    "textReceived.close": "关闭",
    "receiveProgress.receiving": "正在接收",
    "receiveProgress.filesCount": "{current} / {total} 个文件",
    "session.title": "下载",
    "session.desc": "请输入发送方分享链接中的会话 ID，以查看并下载文件。",
    "session.placeholder": "会话 ID",
    "session.continue": "继续",
    "loading": "加载中...",
    "loading.waitingConfirmation": "等待对方授权…",
    "pin.title": "输入 PIN",
    "pin.placeholder": "PIN",
    "pin.continue": "继续",
    "error.title": "错误",
    "error.retry": "重试",
    "error.missingSession": "缺少会话 ID，请使用发送方提供的分享链接。",
    "error.pinRequired": "需要 PIN",
    "error.requestFailed": "请求失败",
    "error.authTimeout": "授权超时，请重试",
    "files.title": "下载文件",
    "files.from": "来自",
    "files.download": "下载",
    "files.viewDetail": "查看文件详情",
    "files.fromPath": "来自 {path}",
    "files.searchPlaceholder": "搜索文件名或路径",
    "files.close": "关闭",
    "pagination.prev": "上一页",
    "pagination.next": "下一页",
    "pagination.page": "第 {page} 页，共 {total} 页",
    "pagination.showing": "显示 {from}-{to}，共 {count} 个文件",
    "lang.zh": "中文",
    "lang.en": "English",
  },
  en: {
    "nav.download": "Download",
    "nav.manage": "Manage",
    "nav.settings": "Settings",
    "nav.about": "About",
    "nav.share": "Share link",
    "manage.devices": "Devices",
    "manage.scan": "Scan",
    "manage.noDevices": "No devices",
    "manage.files": "Select files",
    "manage.filesSelected": "file(s) selected",
    "manage.send": "Send",
    "manage.selectDeviceAndFiles": "Please select a device and files",
    "settings.saved": "Saved",
    "settings.alias": "Device alias",
    "settings.downloadFolder": "Download folder",
    "settings.pin": "PIN",
    "settings.autoSave": "Auto save (no confirm when receiving)",
    "settings.useHttps": "Use HTTPS",
    "share.createSessionDesc": "Create a share session and send the link to the receiver to download files on the download page.",
    "share.createSession": "Create session",
    "share.downloadLink": "Download link",
    "share.copy": "Copy",
    "confirmReceive.title": "Confirm receive",
    "confirmReceive.from": "From",
    "confirmReceive.files": "files",
    "confirmReceive.accept": "Accept",
    "confirmReceive.reject": "Reject",
    "confirmDownload.title": "Confirm download",
    "textReceived.copy": "Copy",
    "textReceived.close": "Close",
    "receiveProgress.receiving": "Receiving",
    "receiveProgress.filesCount": "{current} / {total} files",
    "session.title": "Download",
    "session.desc": "Enter the session ID from the sender's share link to view and download files.",
    "session.placeholder": "Session ID",
    "session.continue": "Continue",
    "loading": "Loading...",
    "loading.waitingConfirmation": "Waiting for authorization…",
    "pin.title": "Enter PIN",
    "pin.placeholder": "PIN",
    "pin.continue": "Continue",
    "error.title": "Error",
    "error.retry": "Retry",
    "error.missingSession": "Missing session ID. Please use the share link provided by the sender.",
    "error.pinRequired": "PIN required",
    "error.requestFailed": "Request failed",
    "error.authTimeout": "Authorization timed out. Please try again.",
    "files.title": "Download Files",
    "files.from": "From",
    "files.download": "Download",
    "files.viewDetail": "View file details",
    "files.fromPath": "From {path}",
    "files.searchPlaceholder": "Search by file name or path",
    "files.close": "Close",
    "pagination.prev": "Previous",
    "pagination.next": "Next",
    "pagination.page": "Page {page} of {total}",
    "pagination.showing": "Showing {from}-{to} of {count} files",
    "lang.zh": "中文",
    "lang.en": "English",
  },
};

export function getLocaleFromHeader(acceptLanguage: string | null): Locale {
  if (!acceptLanguage) return "en";
  const first = acceptLanguage.split(",")[0]?.toLowerCase() ?? "";
  if (first.startsWith("zh")) return "zh";
  return "en";
}
